<template>
  <header data-testid="header" class="header bg-(--color-brand-color)">
    <div class="w-full max-w-6xl mx-auto">
      <div class="flex items-center justify-between py-4 px-6">
        <site-branding
          :title="settingsStore.get.title"
          :logo="settingsStore.get.logo"
          text-color="white"
        />

        <nav>
          <HeaderAuthDropdown
            v-if="userStore.user.userId"
          />
          <div v-else class="flex items-center">
            <Button type="primary" href="/login" size="small"> Login </Button>
            <Button
              v-if="settingsStore.get.allowSignup"
              type="primary"
              :outline="true"
              href="/join"
              size="small"
            >
              Create an account
            </Button>
          </div>
        </nav>
      </div>

      <navbar class="mt-2" />
    </div>
  </header>
</template>

<script setup lang="ts">
import { useSettingStore } from "../store/settings";
import { useUserStore } from "../store/user";

// components
import Navbar from "./Navbar.vue";
import SiteBranding from "./site/SiteBranding.vue";
import Button from "./ui/Button.vue";
import HeaderAuthDropdown from "./HeaderAuthDropdown.vue";

const settingsStore = useSettingStore();
const userStore = useUserStore();
</script>
